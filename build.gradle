/*
 * This file was generated by the Gradle 'init' task.
 */

allprojects {
    apply plugin: 'idea'

    group = 'gaoxingliang.logrewriter'
    version = '0.0.1'

    configurations {
        apt
    }
}

subprojects {
    apply plugin: 'java'

    repositories {
        mavenCentral()
    }

    dependencies {
        /* lombok */
        apt("org.projectlombok:lombok:1.18.12")
        compile 'org.projectlombok:lombok:1.18.12'
        implementation 'org.springframework.boot:spring-boot-starter'

        compile group: 'com.alibaba', name: 'fastjson', version: '1.2.68'
        compile group: 'com.fasterxml.jackson.core', name: 'jackson-databind', version: '2.11.3'

        /* logging */
        compile 'org.apache.logging.log4j:log4j-api:2.17.0'
        compile 'org.apache.logging.log4j:log4j-core:2.17.0'
        compile 'org.apache.logging.log4j:log4j-slf4j-impl:2.8'

        compile 'org.springframework.boot:spring-boot-starter-web:2.1.0.RELEASE'
        compile group: 'commons-io', name: 'commons-io', version: '2.8.0'

        compile 'org.apache.commons:commons-lang3:3.8.1'
        compile 'org.projectlombok:lombok:1.18.12'
        compile 'org.springframework.boot:spring-boot-starter-log4j2:2.1.0.RELEASE'
        // logs to loki
        implementation 'pl.tkowalcz.tjahzi:log4j2-appender:0.9.5'
    }

    configurations {
        all*.exclude module: 'spring-boot-starter-logging'
        all*.exclude module: 'logback-classic'
        all*.exclude module: 'log4j-over-slf4j'
    }

    sourceCompatibility = '1.8'

    tasks.withType(JavaCompile) {
        options.encoding = 'UTF-8'
    }

    compileJava {
        options.annotationProcessorPath = configurations.apt
    }

}
